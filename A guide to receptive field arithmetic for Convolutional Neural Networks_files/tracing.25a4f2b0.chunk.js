(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"./src/util/tracing.ts":function(n,e,t){"use strict";t.r(e),t.d(e,"init",(function(){return a})),t.d(e,"extractSpan",(function(){return u})),t.d(e,"instrumentAppPerformance",(function(){return l}));var r=t("./node_modules/lightstep-tracer/browser.js"),o=t("./node_modules/opentracing/lib/index.js"),s=t("./src/store/actions/debug.ts"),i=t("./src/store/selectors/session.ts"),c=t("./src/util/performance.ts"),a=function(n){var e=n.name,t=n.host,s=n.token,i=n.appVersion,c=new r.Tracer({component_name:e,xhr_instrumentation:!1,access_token:s,collector_host:t,default_span_tags:{"component.version":i}});return Object(o.initGlobalTracer)(c),c},u=function(n,e){return e?n.extract(o.FORMAT_HTTP_HEADERS,e):null},l=function(n,e,t,r,a,u,l){var d=l?l.metricName:"unidentified",f={"user.logged_in":Object(i.a)(a),"req.route_name":d,"req.route":d};u.forEach((function(n){return f["req.".concat(n)]=1}));var p={loggedIn:Object(i.a)(a),route:d,withinPostInternalLinksExperiment:u.includes("post_internal_links")},g=function(n){return Math.round(1e3*n)},m=function(e,t,r,o){var s=r.start,i=r.end,c=n.startSpan("timing.".concat(t),{childOf:e,tags:f}).setBeginMicros(g(s)).setEndMicros(g(i));return null!=o&&o(c),c.finish(),c};c.d.observe((function(i){r.reportRender(p,i);var c=n.startSpan("timing.navigation",{references:[Object(o.followsFrom)(e)],tags:f}).setBeginMicros(g(i.load.start)).setEndMicros(g(i.load.end));m(c,"beforeDomainLookup",i.beforeDomainLookup),m(c,"domainLookup",i.domainLookup),m(c,"connect",i.connect),m(c,"request",i.request),m(c,"response",i.response),m(c,"processing",i.processing);var a=i.overallFCP,u=i.client,l=i.render,d=i.overallLCP;null!=a&&m(c,"firstContentfulPaint",a),null!=u&&m(c,"client",u,(function(n){null!=l&&m(n,"render",l)})),null!=d&&m(c,"largestContentfulPaint",d),c.finish(),t(Object(s.c)(c.generateTraceURL()))})),c.b.observe((function(t){r.reportInput(p,t),n.startSpan("timing.input.first.delay",{references:[Object(o.followsFrom)(e)],tags:f}).setBeginMicros(g(t.first.start)).setEndMicros(g(t.first.end)).finish()}))}}}]);
//# sourceMappingURL=tracing.25a4f2b0.chunk.js.map